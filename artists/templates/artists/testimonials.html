{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'artists/css/artists.css' %}">
{% endblock %}

{% block content %}
<div class="container testimonials-container justify-content-center my-3 rounded">
    <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active mt-5 text-center">
                <div class="row justify-content-center">
                    <div class="col-8 mt-3">
                        <span class="testimonial-rating">
                            {% if latest_testimonial.rating == 5 %}
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            {% elif latest_testimonial.rating == 4 %}
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            {% elif latest_testimonial.rating == 3 %}
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            {% elif latest_testimonial.rating == 2 %}
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            {% elif latest_testimonial.rating == 1 %}
                            <i class="fa-solid fa-star"></i>
                            {% endif %}
                        </span>
                    </div>
                </div>
                <div class="row justify-content-center">
                    <div class="col-8 mt-3">
                        <p>{{ latest_testimonial.review }}</p>
                    </div>
                </div>
                <div class="row justify-content-center">
                    <div class="col-8">
                        <strong>{{ latest_testimonial.artist.friendly_name }}</strong>
                    </div>
                </div>
                {% if user.artist == latest_testimonial.artist %}
                <div class="row justify-content-center text-center">
                    <div class="col col-sm-4">
                        <a href="{% url 'edit_testimonial' latest_testimonial.id %}" class="btn btn-dark rounded"
                            aria-label="Click here to edit your testmonial">
                            <span class="text-uppercase">Edit Testimonial</span>
                        </a>
                    </div>
                    <div class="col col-sm-4">
                        <a href="{% url 'delete_testimonial' latest_testimonial.id %}" class="btn btn-danger rounded"
                            aria-label="Click here to delete the testimonial">
                            <span class="text-uppercase">Delete Testimonial</span>
                        </a>
                    </div>
                </div>
                {% endif %}
            </div>
            {% for testimonial in testimonials %}
            <div class="carousel-item mt-5 text-center">
                <div class="row justify-content-center">
                    <div class="col-8 mt-3">
                        <span class="testimonial-rating">
                            {% if testimonial.rating == 5 %}
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            {% elif testimonial.rating == 4 %}
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            {% elif testimonial.rating == 3 %}
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            {% elif testimonial.rating == 2 %}
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            {% elif testimonial.rating == 1 %}
                            <i class="fa-solid fa-star"></i>
                            {% endif %}
                        </span>
                    </div>
                </div>
                <div class="row justify-content-center">
                    <div class="col-8 mt-3">
                        <p>{{ testimonial.review }}</p>
                    </div>
                </div>
                <div class="row justify-content-center">
                    <div class="col-8">
                        <strong>{{ testimonial.artist.friendly_name }}</strong>
                    </div>
                </div>
                {% if user.artist == testimonial.artist %}
                <div class="row justify-content-center text-center">
                    <div class="col col-sm-4">
                        <a href="{% url 'edit_testimonial' testimonial.id %}" class="btn btn-dark rounded"
                            aria-label="Click here to edit your testmonial">
                            <span class="text-uppercase">Edit Testimonial</span>
                        </a>
                    </div>
                    <div class="col col-sm-4">
                        <a href="{% url 'delete_testimonial' testimonial.id %}" class="btn btn-danger rounded"
                            aria-label="Click here to delete the testimonial">
                            <span class="text-uppercase">Delete Testimonial</span>
                        </a>
                    </div>
                </div>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        {% if user.artist and not user.artist.testimonial %}
        <div class="row justify-content-center text-center">
            <div class="col-12 col-sm-8">
                <button class="btn btn-dark rounded my-3"><a href="{% url 'add_testimonial' %}"
                        aria-label="Click to add a testimonial">Add Your Testimonial</a></button>
            </div>
        </div>
        {% endif %}
        <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
</div>
{% endblock %}